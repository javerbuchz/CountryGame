<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Paises</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal-active {
            visibility: visible;
            opacity: 1;
        }
        .filter-button {
            background-color: #e5e7eb;
            color: #1f2937;
            padding: 0.75rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .filter-button:hover {
            background-color: #d1d5db;
        }
        .filter-button.active {
            background-color: #3b82f6;
            color: white;
            border-color: #1e40af;
        }
        .color-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        }
        .color-circle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }
        .color-circle.active {
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container-main p-4 sm:p-8">

        <!-- Page Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-extrabold text-blue-800 mb-2 drop-shadow-md">Juego de Paises</h1>
            <p class="text-lg md:text-xl text-gray-600">Filtra, busca o selecciona un pais al azar para jugar</p>
        </header>

        <!-- Filters and Actions Section -->
        <div class="bg-white p-6 md:p-8 rounded-3xl shadow-xl mb-8 relative">
            <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
                <div class="flex-grow flex flex-wrap items-center justify-start gap-4">

                    <!-- Continent/Region Filter -->
                    <div class="w-full sm:w-1/3 md:w-1/4 lg:w-1/5">
                        <label for="continente-select" class="font-bold text-gray-700 sr-only">Continente, Region</label>
                        <select id="continente-select" class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                            <option value="">Continente</option>
                        </select>
                    </div>

                    <!-- Language Filter -->
                    <div class="w-full sm:w-1/3 md:w-1/4 lg:w-1/5">
                        <label for="idioma-select" class="font-bold text-gray-700 sr-only">Idioma</label>
                        <select id="idioma-select" class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                            <option value="">Idioma</option>
                        </select>
                    </div>

                    <!-- Manual Search -->
                    <div class="w-full sm:w-1/3 md:w-1/4 lg:w-1/5">
                        <label for="search-input" class="font-bold text-gray-700 sr-only">Busqueda</label>
                        <input type="text" id="search-input" placeholder="Buscar pais..." class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                    </div>
                </div>
			</div>
			
            <!-- Flag Color Filters -->
            <div class="mt-4">
                <div id="colores-container" class="flex flex-wrap gap-2">
                <p class="font-bold text-gray-700 mb-2">Bandera: <!-- Color buttons will be generated here by JS-->
                </div></p>
            </div>
			</br>
	        <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
				<div class="flex flex-wrap items-center justify-between gap-4">
					<!-- World Cup Filters as Buttons -->
                        <button id="ganador-btn" class="filter-button">
                            üèÜ
                        </button>
                        <button id="finalista-btn" class="filter-button">
                            ü•à
                        </button>
                        <button id="mundiales-btn" class="filter-button">
                            ‚öΩ
                        </button>
			</div>
	        <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
                    <!-- Random Country Button with Dice Icon -->
                    <button id="random-btn" class="text-3xl font-bold rounded-full w-12 h-12 flex items-center justify-center text-blue-500 hover:bg-blue-100 transition-colors duration-200">
                        üé≤
                    </button>

                    <!-- Reset Filters Button with X Icon -->
					<button id="reset-btn" class="text-5xl font-bold rounded-full w-12 h-12 flex items-center justify-center text-red-500 hover:bg-red-100 transition-colors duration-200">
						&times;
					</button>
                </div>
            </div>


        </div>

        <!-- Search Results Section -->
        <div id="results-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Country cards will be rendered here -->
            <p id="no-results" class="col-span-full text-center text-gray-500 font-semibold text-lg hidden">No se encontraron paises,los filtros o la busqueda seleccionados.</p>
            <p id="no-results" class="col-span-full text-center text-gray-500 font-semibold text-lg hidden">No se encontraron paises para esta busqueda.</p>
        </div>

    </div>

    <!-- Modal to show country details -->
    <div id="modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 invisible opacity-0">
        <div class="bg-white p-6 md:p-8 rounded-3xl shadow-2xl max-w-lg w-full relative transform scale-95 transition-all duration-300 ease-out">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            <h2 id="modal-country-name" class="text-3xl font-bold mb-4 text-blue-800 flex items-center"></h2>
            <div id="modal-content" class="text-gray-700 space-y-2">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        // CSV data
        const csvData = `Pais,Continente,Region,Idioma,Bandera (colores/simbolos),Mundiales (ganados/finales/participaciones)
Afganistan,Asia,Sur,"Dari (persa), Pastun","Negro, rojo, verde, escudo nacional",0/0/0
Albania,Europa,Sur,Albanes,"Rojo, negro, aguila bicefala",0/0/0
Alemania,Europa,Central,Aleman,"Negro, rojo, dorado","4/8/20"
Andorra,Europa,Sur,Catalan,"Azul, amarillo, rojo, escudo de armas",0/0/0
Angola,Africa,Sur,Portugues,"Rojo, negro, amarillo, estrella, machete, rueda dentada",0/0/0
Antigua y Barbuda,America,Central,Ingles,"Negro, azul, blanco, rojo, sol dorado",0/0/0
Arabia Saudita,Asia,Oeste,Arabe,"Verde, blanco, shahada, espada",0/0/6
Argelia,Africa,Norte,Arabe,"Verde, blanco, rojo, media luna, estrella",0/0/4
Argentina,America,Sur,Espa√±ol,"Celeste, blanco, amarillo, dorado, sol","3/6/18"
Armenia,Asia,Oeste,Armenio,"Rojo, azul, naranja",0/0/0
Australia,Oceania,,Ingles,"Azul, Union Jack, estrella Commonwealth, Cruz del Sur",0/0/6
Austria,Europa,Central,Aleman,"Rojo, blanco",0/0/7
Azerbaiyan,Europa,Oeste,Azeri,"Azul, rojo, verde, blanco, estrella, media luna",0/0/0
Bahamas,America,Norte,Ingles,"Azul acuamarina, amarillo, negro",0/0/0
Banglades,Asia,Sur,Bengali,"Verde, rojo, circulo",0/0/0
Barbados,America,Central,Ingles,"Azul, amarillo, negro, tridente ",0/0/0
Barein,Asia,Oeste,Arabe,"Rojo, blanco",0/0/0
Belgica,Europa,Oeste,"Neerlandes, Frances, Aleman","Negro, amarillo, rojo",0/0/14
Belice,America,Central,Ingles,"Azul, rojos, escudo de armas",0/0/0
Benin,Africa,Oeste,Frances,"Verde, amarillo, rojo",0/0/0
Bielorrusia,Europa,Este,"Bieloruso, Ruso","Rojo, verde, patron ornamental",0/0/0
Birmania (Myanmar),Asia,Sudeste,Birmano,"Amarillo, verde, rojo, blanco, estrella",0/0/0
Bolivia,America,Sur,Espa√±ol,"Rojo, amarillo, verde",0/0/3
Bonaire,America,Central,"Neerlandes,Papiamento","Azul, amarillo, blanco, negro, rojo, estrella, rosa de los vientos, timon",0/0/0
Bosnia Herzegovina,Europa,Sur,"Bosnio, Croata, Serbio","Azul, amarillo, blanco, estrellas, triangulo",0/0/3
Botsuana,Africa,Sur,"Ingles, Setsuana","Celeste, negro, blanco",0/0/0
Brasil,America,Sur,Portugues,"Verde, amarillo, azul, blanco","5/7/22"
Brunei,Asia,Sudeste,Malayo,"Amarillo, blanco, negro, escudo de armas",0/0/0
Bulgaria,Europa,Sur,Bulgaro,"Blanco, verde, rojo",0/0/7
Burkina Faso,Africa,Oeste,Frances,"Rojo, verde, amarillo, estrella",0/0/0
Burundi,Africa,Central,"Kirundi, Frances","Rojo, verde, blanco, estrellas",0/0/0
Butan,Asia,Sur,Dzongkha,"Amarillo, naranja, blanco, dragon",0/0/0
Cabo Verde,Africa,Oeste,Portugues,"Azul, blanco, rojo, estrellas",0/0/0
Camboya,Asia,Sudeste,Jemer,"Azul, rojo, azul, templo de Angkor Wat",0/0/0
Camerun,Africa,Central,"Frances,Ingles","Verde, rojo, amarillo, dorada, estrella",0/0/8
Canada,America,Norte,"Ingles, Frances","Rojo, blanco, hoja de arce rojo",0/0/8
Catar,Asia,Oeste,Arabe,"Granate, blanco",0/0/1
Chad,Africa,Central,"Frances, Arabe","Azul, amarillo, rojo",0/0/0
Chile,America,Sur,Espa√±ol,"Rojo, blanco, azul, estrella",0/0/9
China,Asia,Este,"Chino, Mandarin, ","Rojo, amarillo, estrellas",0/0/1
Chipre,Europa,Sur,"Griego, Turco","Blanco, silueta de la isla, ramas de olivo",0/0/0
Colombia,America,Sur,Espa√±ol,"Amarillo, azul, rojo",0/0/6
Comoras,Africa,Sur,"Comorense, Frances, Arabe","Amarillo, blanco, rojo, azul, media luna, estrellas",0/0/0
Corea del Norte,Asia,Este,Coreano,"Azul, rojo, blanco, estrella",0/0/2
Corea del Sur,Asia,Este,Coreano,"Blanco, negro, yin-yang, trigramas",0/0/11
Costa de Marfil,Africa,Oeste,Frances,"Naranja, blanco, verde",0/0/4
Costa Rica,America,Central,Espa√±ol,"Azul, blanco, rojo",0/0/6
Croacia,Europa,Sur,Croata,"Rojo, blanco, azul, escudo de armas",0/1/6
Cuba,America,Central,Espa√±ol,"Rojo, blanco, azul, estrella",0/0/0
Dinamarca,Europa,Norte,Danes,"Rojo, blanco, cruz",0/0/6
Dominica,America,Central,Ingles,"Verde, amarillo, negro, blanco, loro",0/0/0
Ecuador,America,Sur,Espa√±ol,"Amarillo, azul, rojo, escudo de armas",0/0/4
Egipto,Africa,Norte,Arabe,"Rojo, blanco, negro, aguila de Saladino",0/0/3
El Salvador,America,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/4
Emiratos Arabes Unidos,Asia,Oeste,Arabe,"Verde, blanco, negro, rojo",0/0/1
Eritrea,Africa,Norte,"Tigri√±a, Arabe,Ingles","Rojo, verde, azul,ramas de olivo",0/0/0
Escocia,Europa,Oeste,Ingles,"Azul, blanco, cruz",0/0/8
Eslovaquia,Europa,Central,Eslovaco,"Blanco, azul, rojo, escudo de armas",0/0/1
Eslovenia,Europa,Sur,Esloveno,"Blanco, azul, rojo, escudo de armas",0/0/2
Espa√±a,Europa,Sur,Espa√±ol,"Rojo, amarillo, rojo, escudo de armas","1/1/16"
Estados Unidos,America,Norte,Ingles,"Rojo, blanco, azul,estrellas",0/0/12
Estonia,Europa,Norte,Estonio,"Azul, negro, blanco",0/0/0
Etiopia,Africa,Norte,Amharico,"Verde, amarillo, rojo, emblema nacional",0/0/0
Filipinas,Asia,Sudeste,"Filipino, Ingles","Azul, rojo, blanco, sol, estrellas",0/0/0
Finlandia,Europa,Norte,"Fines, Sueco","Blanco, azul, cruz",0/0/0
Fiyi,Oceania,,"Ingles, Fiyiano","Azul, Union Jack, escudo de armas",0/0/0
Francia,Europa,Oeste,Frances,"Azul, blanco, rojo","2/4/16"
Gabon,Africa,Central,Frances,"Verde, amarillo, azul",0/0/0
Gales,Europa,Oeste,"Ingles, Gales","rojo, blanco, verde, dragon",0/0/2
Gambia,Africa,Oeste,Ingles,"Rojo, azul, verde, blancos",0/0/0
Georgia,Asia,Oeste,Georgiano,"Blanco, rojo, cruces",0/0/0
Gibraltar,Europa,Sur,Ingles,"blanco, rojo, castillo, llave de oro",0/0/0
Ghana,Africa,Oeste,Ingles,"Rojo, amarillo, verde, negro, estrella ",0/0/4
Granada,America,Central,Ingles,"Rojo, amarillo, verde, estrella, nuez moscada",0/0/0
Grecia,Europa,Sur,Griego,"Azul, blanco, cruz",0/0/4
Guatemala,America,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/4
Guinea,Africa,Oeste,Frances,"Rojo, amarillo, verde",0/0/0
Guinea-Bissau,Africa,Oeste,Portugues,"Rojo, negro, amarillo, verde, negro, estrella",0/0/0
Guinea Ecuatorial,Africa,Central,"Espa√±ol, Frances, Portugues","Verde, blanco, rojo, escudo nacional",0/0/0
Guyana,America,Sur,Ingles,"Verde, amarillo, blanco, rojo, negro",0/0/0
Haiti,America,Central,"Haitiano, Frances","Azul, rojo, escudo de armas",0/0/0
Honduras,America,Central,Espa√±ol,"Azul, blanco, estrellas",0/0/3
Hong Kong,Asia,Este,"Cantones,Ingles","rojo, blanco, flor de bauhinia",0/0/0
Hungria,Europa,Central,Hungaro,"Rojo, blanco, verde",0/2/9
India,Asia,Sur,"Hindi,Ingles","Naranja, blanco, verde, azul, Chakra",0/0/0
Indonesia,Asia,Sudeste,Indonesio,"Rojo, blanco",0/0/1
Inglaterra,Europa,Oeste,Ingles,"blanco, rojo, cruz",1/1/16
Irak,Asia,Oeste,"Arabe, Kurdo","Rojo, blanco, negro, verde",0/0/8
Iran,Asia,Oeste,Persa (Farsi),"Verde, blanco, rojo, emblema nacional",0/0/6
Irlanda,Europa,Oeste,"Irlandes, Ingles","Verde, blanco, naranja",0/0/3
Irlanda del Norte,Europa,Oeste,Ingles,"blanco, rojo, cruz, estrella, corona",0/0/3
Islandia,Europa,Norte,Islandes,"Azul, rojo, cruz, blanco",0/0/1
Islas Feroe,Europa,Norte,"Feroes,Danes","blanco, rojo, cruz, azul",0/0/0
Israel,Asia,Oeste,"Hebreo, Arabe","Blanco, azul, Estrella de David",0/0/1
Italia,Europa,Sur,Italiano,"Verde, blanco, rojo","4/6/18"
Jamaica,America,Central,Ingles,"Negro, verde, amarillo",0/0/0
Japon,Asia,Este,Japones,"Blanco, rojo, circulo",0/0/7
Jordania,Asia,Oeste,Arabe,"Negro, blanco, verde, rojo, triangulo, estrella",0/0/0
Kazajistan,Asia,Central,"Kazajo, Ruso","Celeste, sol, aguila, patron ornamental",0/0/0
Kenia,Africa,Este,"Suajili, Ingles","Negro, rojo, verde, escudo, lanzas",0/0/0
Kirguistan,Asia,Central,"Kirguis, Ruso","Rojo, sol, yurta estilizada",0/0/0
Kiribati,Oceania,,"Ingles, Kiribatiano","Rojo, azul, blanco, sol",0/0/0
Kuwait,Asia,Oeste,Arabe,"Verde, blanco, rojo, negro",0/0/1
Laos,Asia,Sudeste,Laosiano,"Rojo, azul, blanco, circulo",0/0/0
Lesoto,Africa,Sur,"Sesoto,Ingles","Azul, blanco, verde, sombrero tradicional",0/0/0
Letonia,Europa,Norte,Leton,"Rojo, blanco",0/0/0
Libano,Asia,Oeste,Arabe,"Rojo, blanco, verde, cedro",0/0/0
Liberia,Africa,Oeste,Ingles,"Rojo, blanco, azul, cuadrado, estrella",0/0/0
Libia,Africa,Norte,Arabe,"Rojo, negro, verde, media luna, estrella",0/0/0
Liechtenstein,Europa,Central,Aleman,"Azul, rojo, dorado, corona",0/0/0
Lituania,Europa,Norte,Lituano,"Amarillo, verde, rojo",0/0/0
Luxemburgo,Europa,Oeste,"Luxemburgues, Frances, Aleman","Rojo, blanco, azul",0/0/1
Macao,Asia,Este,"Cantones, Portugues","Verde, blanco, flor de loto, puente, mar",0/0/0
Macedonia del Norte,Europa,Sur,Macedonio,"Rojo, amarillo, sol",0/0/0
Madagascar,Africa,Sur,"Malagasy, Frances","Blanco, rojo, verde",0/0/0
Malasia,Asia,Sudeste,Malayo,"Rojo, blanco, azul, amarillo, media luna, estrella",0/0/0
Malaui,Africa,Sur,"Chichewa,Ingles","Negro, rojo, verde, sol",0/0/0
Maldivas,Asia,Sur,Divehi,"Rojo, rectangulo verde, media luna blanco",0/0/0
Mali,Africa,Oeste,Frances,"Verde, amarillo, rojo",0/0/0
Malta,Europa,Sur,"Maltes,Ingles","Blanco, rojo",0/0/0
Marruecos,Africa,Norte,"Arabe, Bereber","Rojo, verde, estrella",0/0/6
Mauricio,Africa,Sur,"Ingles, Frances","Rojo, azul, amarillo, verde",0/0/0
Mauritania,Africa,Oeste,Arabe,"Verde, amarillo, estrella, media luna",0/0/0
Mexico,America,Norte,Espa√±ol,"Verde, blanco, rojo, escudo nacional",0/0/18
Micronesia,Oceania,,Ingles,"Azul, blancos, estrellas",0/0/0
Moldavia,Europa,Este,Rumano,"Azul, amarillo, rojo, escudo de armas",0/0/0
Monaco,Europa,Sur,Frances,"Rojo, blanco",0/0/0
Mongolia,Asia,Este,Mongol,"Rojo, azul, rojo, Soyombo",0/0/0
Montenegro,Europa,Sur,Montenegrino,"Rojo, dorado, escudo de armas",0/0/0
Mozambique,Africa,Sur,Portugues,"Verde, negro, amarillo, libro, azada, rifle",0/0/0
Namibia,Africa,Sur,Ingles,"Azul, rojo, verde, blanco, dorado, sol",0/0/0
Nauru,Oceania,,"Nauruano,Ingles","Azul, amarillo, estrella",0/0/0
Nepal,Asia,Sur,Nepali,"Rojo, azul, sol, luna",0/0/0
Nicaragua,America,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/0
Niger,Africa,Oeste,Frances,"Naranja, blanco, verde, circulo naranja",0/0/0
Nigeria,Africa,Oeste,Ingles,"Verde, blanco",0/0/6
Noruega,Europa,Norte,Noruego,"Rojo, cruz azul, blanco",0/0/3
Nueva Zelanda,Oceania,,"Ingles, Maori","Azul, Union Jack, Cruz del Sur",0/0/6
Oman,Asia,Oeste,Arabe,"Blanco, rojo, verde, emblema nacional",0/0/0
Paises Bajos,Europa,Oeste,Neerlandes,"Rojo, blanco, azul",0/3/11
Pakistan,Asia,Sur,"Urdu,Ingles","Verde, blanco, franja, media luna, estrella",0/0/0
Palaos,Oceania,,"Palaosiano, Ingles","Azul, amarillo, circulo",0/0/0
Panama,America,Central,Espa√±ol,"Blanco, azul, rojo, estrellas",0/0/1
Papua Nueva Guinea,Oceania,,"Tok pisin, Hiri motu, Ingles","Rojo, negro, ave del paraiso, Cruz del Sur",0/0/0
Paraguay,America,Sur,"Espa√±ol, Guarani","Rojo, blanco, azul, escudo nacional",0/0/8
Peru,America,Sur,Espa√±ol,"Rojo, blanco",0/0/5
Polonia,Europa,Central,Polaco,"Blanco, rojo",0/0/8
Portugal,Europa,Sur,Portugues,"Rojo, verde, escudo de armas",0/0/8
Puerto Rico,America,Central,"Espa√±ol,Ingles","Rojo, blanco, azul, estrella",0/0/0
Reino Unido,Europa,Oeste,Ingles,"Azul, rojo, blanco","1/1/16"
Republica Centroafricana,Africa,Central,"Frances, Sango","Azul, blanco, verde, amarillo, estrella",0/0/0
Republica Checa,Europa,Central,Checo,"Blanco, rojo, azul",0/2/9
Republica Democratica del Congo,Africa,Central,Frances,"Azul, rojo, amarillo, estrella",0/0/0
Republica Dominicana,America,Central,Espa√±ol,"Azul, rojo, blanco, escudo de armas",0/0/0
Republica del Congo,Africa,Central,Frances,"Verde, amarillo, rojo",0/0/0
Rumania,Europa,Este,Rumano,"Azul, amarillo, rojo",0/0/7
Rusia,Europa,Oeste,Ruso,"Blanco, azul, rojo",0/0/11
Ruanda,Africa,Central,"Kinyarwanda, Frances,Ingles","Azul, amarillo, verde, sol",0/0/0
Saba,America,Central,"Neerlandes,Ingles","rojo, azul, blanco, verde, estrella de cinco puntas",0/0/0
Samoa,Oceania,,"Samoano,Ingles","Rojo, azul, blanco, cruz",0/0/0
San Cristobal y Nieves,America,Central,Ingles,"Verde, rojo, negro, amarillo, estrellas",0/0/0
San Eustaquio,America,Central,"Neerlandes,Ingles","Azul, amarillo, rojo, emblema",0/0/0
San Marino,Europa,Sur,Italiano,"Blanco, azul, escudo de armas",0/0/0
San Vicente y las Granadinas,America,Central,Ingles,"Azul, amarillo, verde, rombos",0/0/0
Santa Lucia,America,Central,Ingles,"Azul, negro, blanco, amarillo, triangulo",0/0/0
Santo Tome y Principe,Africa,Central,Portugues,"Verde, amarillo, rojo, negro, estrellas",0/0/0
Senegal,Africa,Oeste,Frances,"Verde, amarillo, rojo, estrella",0/0/3
Serbia,Europa,Sur,Serbio,"Rojo, azul, blanco, escudo de armas",0/0/12
Seychelles,Africa,Sur,"Criollo, Ingles, Frances","Rojo, amarillo, azul, verde, blanco",0/0/0
Sierra Leona,Africa,Oeste,Ingles,"Verde, blanco, azul",0/0/0
Singapur,Asia,Sudeste,"Malayo, Ingles, Chino, Tamil","Rojo, blanco, luna, estrellas",0/0/0
Siria,Asia,Oeste,Arabe,"Rojo, blanco, negro, verde, estrellas",0/0/0
Somalia,Africa,Norte,"Somali, Arabe","Celeste, blanco, estrella",0/0/0
Sri Lanka,Asia,Sur,"Cingales, Tamil","Amarillo, verde, naranja, rojo, leon",0/0/0
Sudafrica,Africa,Sur,"Ingles, Zulu, Xhosa, Afrikaans, Sesoto sa laboa, Setsuana, Tsonga, Suazi, Venda, Sesoto, Lengua de se√±as sudafricana","Negro, amarillo, verde, blanco, rojo, azul",0/0/3
Sudan,Africa,Norte,"Arabe,Ingles","Rojo, blanco, negro, verde, triangulo",0/0/0
Sudan del Sur,Africa,Norte,Ingles,"Rojo, blanco, negro, verde, amarillo, estrella",0/0/0
Suecia,Europa,Norte,Sueco,"Azul, amarillo, cruz",0/1/12
Suiza,Europa,Central,"Aleman, Frances, Italiano, Romanche","Rojo, blanco, cruz",0/0/12
Surinam,America,Sur,Neerlandes,"Verde, blanco, rojo, amarillo, estrella",0/0/0
Suazilandia (Esuatini),Africa,Sur,"Suazi,Ingles","Azul, amarillo, rojo, escudo, lanzas",0/0/0
Tailandia,Asia,Sudeste,Tailandes,"Rojo, blanco, azul, blanco",0/0/0
Taiwan (China Taipei/Republica de China),Asia,Este,Mandarin,"Rojo, blanco, azul, sol",0/0/0
Tanzania,Africa,Este,"Suajili,Ingles","Verde, azul, negro, amarillo",0/0/0
Tayikistan,Asia,Central,"Tayiko, Ruso","Rojo, blanco, verde, dorado, corona",0/0/0
Timor Oriental,Asia,Sudeste,"Portugues, Tetun","Rojo, amarillo, negro, blanco, estrella",0/0/0
Togo,Africa,Oeste,Frances,"Verde, amarillo, rojo, blanco, estrella",0/0/0
Tonga,Oceania,,"Tongano,Ingles","Rojo, blanco, cruz",0/0/0
Trinidad y Tobago,America,Central,Ingles,"Rojo, negro, blanco",0/0/1
Tunez,Africa,Norte,Arabe,"Rojo, blanco, media luna, estrella",0/0/6
Turkmenistan,Asia,Central,"Turcomano, Ruso","Verde, ornamento, media luna, estrellas",0/0/0
Turquia,Asia,Oeste,Turco,"Rojo, blanco, media luna, estrella",0/0/2
Tuvalu,Oceania,,"Ingles, Tuvaluano","Azul, celeste, amarillo, Union Jack, estrellas",0/0/0
Ucrania,Europa,Este,Ucraniano,"Azul, amarillo",0/0/1
Uganda,Africa,Este,"Ingles, Suajili","Negro, amarillo, rojo, grulla",0/0/0
Uruguay,America,Sur,Espa√±ol,"Azul, blanco, sol","2/3/14"
Uzbekistan,Asia,Central,Uzbeko,"Azul, blanco, verde, media luna, estrellas",0/0/0
Vanuatu,Oceania,,"Bislama, Ingles, Frances","Rojo, verde, negro, colmillo, hoja",0/0/0
Venezuela,America,Sur,Espa√±ol,"Amarillo, azul, rojo, estrellas",0/0/0
Vietnam,Asia,Sudeste,Vietnamita,"Rojo, amarillo, estrella",0/0/0
Yemen,Asia,Oeste,Arabe,"Rojo, blanco, negro",0/0/0
Yibuti,Africa,Norte,"Arabe, Frances","Celeste, verde, blanco, rojo, estrella",0/0/0
Zambia,Africa,Sur,Ingles,"Verde, rojo, negro, naranja, aguila",0/0/0
Zimbabue,Africa,Sur,"Chichewa, Chibarwe, Ingles, Kalanga, Koisan, Nambya, Ndau, Ndebele del norte, Shangani, Shona, Sesoto, Tsonga, Setsuana, Venda, Xhosa, Lengua de signos zimbabuense,","Verde, amarillo, rojo, negro, ave, estrella",0/0/0`;

        const colorMap = {
            'negro': '#000000',
            'rojo': '#FF0000',
            'verde': '#008000',
            'azul': '#0000FF',
            'blanco': '#FFFFFF',
            'amarillo': '#FFFF00',
            'naranja': '#FFA500',
            'dorado': '#FFD700',
            'granate': '#800000',
            'celeste': '#87CEEB',
            'marron': '#A52A2A',
            'gris': '#808080',
            'rosa': '#FFC0CB',
            'violeta': '#EE82EE',
            'morado': '#800080',
            'plateado': '#C0C0C0'
        };

        // DOM elements
        const continenteSelect = document.getElementById('continente-select');
        const idiomaSelect = document.getElementById('idioma-select');
        const coloresContainer = document.getElementById('colores-container');
        const mundialesBtn = document.getElementById('mundiales-btn');
        const ganadorBtn = document.getElementById('ganador-btn');
        const finalistaBtn = document.getElementById('finalista-btn');
        const randomBtn = document.getElementById('random-btn');
        const resetBtn = document.getElementById('reset-btn');
        const searchInput = document.getElementById('search-input');
        const resultsContainer = document.getElementById('results-container');
        const noResultsMessage = document.getElementById('no-results');
        const modal = document.getElementById('modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalCountryName = document.getElementById('modal-country-name');
        const modalContent = document.getElementById('modal-content');

        let allCountries = [];
        let filteredCountries = [];

        // Function to extract colors from a string
        function extractColors(text) {
            const colors = Object.keys(colorMap);
            const foundColors = new Set();
            colors.forEach(color => {
                if (text.toLowerCase().includes(color)) {
                    foundColors.add(color);
                }
            });
            return Array.from(foundColors);
        }

        // Function to parse the CSV into an array of objects
        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(h => h.trim().replace(/^"|"$/g, ''));
            const data = lines.slice(1).map(line => {
                const values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(v => v.trim().replace(/^"|"$/g, ''));
                const country = {};
                headers.forEach((header, i) => {
                    country[header.replace(/\s\(.*\)/, '').replace(/\s+/g, '')] = values[i];
                });
                return country;
            });
            return data;
        }

        // Function to render filter options
        function renderFilterOptions() {
            const continentRegions = new Set();
            const continentsOnly = new Set();
            const languages = new Set();
            const colors = new Set();

            allCountries.forEach(country => {
                if (country.Continente) {
                    continentsOnly.add(country.Continente);
                    const continentRegion = country.Continente + (country.Region ? ` - ${country.Region}` : '');
                    continentRegions.add(continentRegion);
                }

                if (country.Idioma) {
                    country.Idioma.split(',').forEach(lang => {
                        const trimmedLang = lang.trim();
                        if (trimmedLang) languages.add(trimmedLang);
                    });
                }

                if (country.Bandera) {
                    extractColors(country.Bandera).forEach(color => colors.add(color));
                }
            });

            const sortedContinentOptions = [...continentsOnly].sort().flatMap(c => {
                const regionOptions = [...continentRegions].filter(cr => cr.startsWith(c)).sort();
                return [c, ...regionOptions];
            });
            const uniqueContinentOptions = new Set(sortedContinentOptions);


            const sortedLanguages = [...languages].sort();
            const sortedColors = [...colors].sort();

            uniqueContinentOptions.forEach(cr => {
                continenteSelect.innerHTML += `<option value="${cr}">${cr}</option>`;
            });
            sortedLanguages.forEach(l => {
                idiomaSelect.innerHTML += `<option value="${l}">${l}</option>`;
            });

            sortedColors.forEach(c => {
                const button = document.createElement('div');
                button.className = 'color-circle';
                button.title = c.charAt(0).toUpperCase() + c.slice(1);
                button.style.backgroundColor = colorMap[c];
                button.dataset.color = c;
                if (c === 'blanco' || c === 'amarillo' || c === 'dorado' || c === 'plateado' || c === 'celeste') {
                    button.style.border = '2px solid #ccc';
                }
                button.addEventListener('click', () => {
                    button.classList.toggle('active');
                    filterAndSearchCountries();
                });
                coloresContainer.appendChild(button);
            });
        }

        // Function to render country cards
        function renderCountries(countries) {
            resultsContainer.innerHTML = '';
            if (countries.length === 0) {
                noResultsMessage.classList.remove('hidden');
            } else {
                noResultsMessage.classList.add('hidden');
            }

            countries.forEach(country => {
                const mundialesData = country.Mundiales.split('/');
                const hasWorldCupParticipation = parseInt(mundialesData[2]) > 0;
                const wins = parseInt(mundialesData[0]);
                const finals = parseInt(mundialesData[1]);

                const card = document.createElement('div');
				
				const locationText = country.Continente + (country.Region ? ` - ${country.Region}` : '');

                card.className = 'card bg-white p-6 rounded-2xl shadow-md flex flex-col justify-between';
                card.innerHTML = `
                    <div>
                        <h3 class="text-xl font-bold mb-2 text-blue-700">${country.Pais}	
                            ${wins > 0 ? `<span class="bg-blue-400 text-blue-900 text-xs font-semibold px-2 py-1 rounded-full">üèÜ ${wins}</span>` : ''}
                            ${finals > 0 ? `<span class="bg-pink-400 text-pink-900 text-xs font-semibold px-2 py-1 rounded-full">ü•à ${finals}</span>` : ''}
                            ${hasWorldCupParticipation ? `<span class="bg-yellow-400 text-yellow-900 text-xs font-semibold px-2 py-1 rounded-full">‚öΩ</span>` : ''}
						</h3>
                        <p class="text-gray-600 mb-1"><span class="font-semibold">Continente:</span> ${locationText || 'N/A'}</p>
                        <p class="text-gray-600 mb-1"><span class="font-semibold">Idioma:</span> ${country.Idioma || 'N/A'}</p>
                        <p class="text-gray-600 mb-4"><span class="font-semibold">Bandera:</span> ${country.Bandera || 'N/A'}</p>
                    </div>
                `;
                card.addEventListener('click', () => {
                    showModal(country);
                });
                resultsContainer.appendChild(card);
            });
        }

        // Function to filter and search countries
        function filterAndSearchCountries() {
            const continentRegion = continenteSelect.value;
            const idioma = idiomaSelect.value;
            const searchTerm = searchInput.value.toLowerCase();

            const selectedColors = Array.from(coloresContainer.querySelectorAll('.color-circle.active')).map(btn => btn.dataset.color);

            const mundiales = mundialesBtn.classList.contains('active');
            const ganador = ganadorBtn.classList.contains('active');
            const finalista = finalistaBtn.classList.contains('active');

            filteredCountries = allCountries.filter(country => {
                const matchesSearch = country.Pais.toLowerCase().includes(searchTerm);
                const matchesContinente = !continentRegion || (country.Continente === continentRegion) || (country.Continente + (country.Region ? ` - ${country.Region}` : '')) === continentRegion;
                const matchesIdioma = !idioma || country.Idioma.split(',').map(l => l.trim()).includes(idioma);

                // New logic: all selected colors must be present
                const countryColors = extractColors(country.Bandera);
                const matchesAllColors = selectedColors.length === 0 || selectedColors.every(color => countryColors.includes(color));

                const mundialesData = country.Mundiales.split('/').map(n => parseInt(n));
                const matchesMundiales = !mundiales || mundialesData[2] > 0;
                const matchesGanador = !ganador || mundialesData[0] > 0;
                const matchesFinalista = !finalista || mundialesData[1] > 0;

                return matchesSearch && matchesContinente && matchesIdioma && matchesAllColors && matchesMundiales && matchesGanador && matchesFinalista;
            });
            renderCountries(filteredCountries);
        }

        // Function to show a random country
        function showRandomCountry() {
            filterAndSearchCountries(); 
            if (filteredCountries.length > 0) {
                const randomCountry = filteredCountries[Math.floor(Math.random() * filteredCountries.length)];
                resultsContainer.innerHTML = ''; 
                renderCountries([randomCountry]);
            } else {
                resultsContainer.innerHTML = `<p id="no-results" class="col-span-full text-center text-gray-500 font-semibold text-lg">No hay paises en la lista para elegir. Por favor, ajusta los filtros.</p>`;
            }
        }

        // Function to show the modal with country details
        function showModal(country) {
            const mundialesData = country.Mundiales.split('/');
            modalCountryName.textContent = country.Pais;
            modalContent.innerHTML = `
                <p><span class="font-bold">Continente:</span> ${country.Continente || 'N/A'}</p>
                <p><span class="font-bold">Region:</span> ${country.Region || 'N/A'}</p>
                <p><span class="font-bold">Idiomas:</span> ${country.Idioma || 'N/A'}</p>
                <p><span class="font-bold">Bandera:</span> ${country.Bandera || 'N/A'}</p>
                <p><span class="font-bold">Mundiales:</span> Ganados: ${mundialesData[0]} / Finales: ${mundialesData[1]} / Participaciones: ${mundialesData[2]}</p>
            `;
            modal.classList.add('modal-active');
        }

        // Function to hide the modal
        function hideModal() {
            modal.classList.remove('modal-active');
        }

        // Initialize the application
        window.onload = () => {
            allCountries = parseCSV(csvData);
            renderFilterOptions();
            filterAndSearchCountries();

            // Add event listeners for filters and actions
            continenteSelect.addEventListener('change', filterAndSearchCountries);
            idiomaSelect.addEventListener('change', filterAndSearchCountries);
            searchInput.addEventListener('input', filterAndSearchCountries);

            // Event listeners for the new filter buttons
            mundialesBtn.addEventListener('click', () => {
                mundialesBtn.classList.toggle('active');
                filterAndSearchCountries();
            });
            ganadorBtn.addEventListener('click', () => {
                ganadorBtn.classList.toggle('active');
                filterAndSearchCountries();
            });
            finalistaBtn.addEventListener('click', () => {
                finalistaBtn.classList.toggle('active');
                filterAndSearchCountries();
            });

            randomBtn.addEventListener('click', showRandomCountry);
            resetBtn.addEventListener('click', () => {
                continenteSelect.value = '';
                idiomaSelect.value = '';
                mundialesBtn.classList.remove('active');
                ganadorBtn.classList.remove('active');
                finalistaBtn.classList.remove('active');
                searchInput.value = '';
                coloresContainer.querySelectorAll('.color-circle').forEach(btn => btn.classList.remove('active'));
                filterAndSearchCountries();
            });
            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'modal') {
                    hideModal();
                }
            });
        };
    </script>
</body>
</html>

