<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Pa√≠ses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            cursor: pointer;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal-active {
            visibility: visible;
            opacity: 1;
        }
        .filter-button {
            background-color: #e5e7eb;
            color: #1f2937;
            padding: 0.75rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.2s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .filter-button:hover {
            background-color: #d1d5db;
        }
        .filter-button.active {
            background-color: #3b82f6;
            color: white;
            border-color: #1e40af;
        }
        .color-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        }
        .color-circle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }
        .color-circle.active {
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container-main p-4 sm:p-8">

        <!-- Page Header -->
        <header class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-extrabold text-blue-800 mb-2 drop-shadow-md">Juego de Pa√≠ses</h1>
            <p class="text-lg md:text-xl text-gray-600">Filtra, busca o selecciona un pa√≠s al azar para jugar</p>
        </header>

        <!-- Filters and Actions Section -->
        <div class="bg-white p-6 md:p-8 rounded-3xl shadow-xl mb-8 relative">
            <div class="flex flex-wrap items-center justify-between gap-4 mb-4">
                <div class="flex-grow flex flex-wrap items-center justify-start gap-4">
                    <!-- Continent/Region Filter -->
                    <div class="w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5">
                        <label for="continente-select" class="font-bold text-gray-700 sr-only">Continente, Regi√≥n</label>
                        <select id="continente-select" class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                            <option value="">Continente</option>
                        </select>
                    </div>

                    <!-- Language Filter -->
                    <div class="w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5">
                        <label for="idioma-select" class="font-bold text-gray-700 sr-only">Idioma</label>
                        <select id="idioma-select" class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                            <option value="">Idioma</option>
                        </select>
                    </div>

                    <!-- Manual Search -->
                    <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
                        <label for="search-input" class="font-bold text-gray-700 sr-only">B√∫squeda</label>
                        <input type="text" id="search-input" placeholder="Buscar pa√≠s..." class="p-3 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 w-full">
                    </div>
                </div>
				<div class="flex flex-wrap items-center justify-between gap-4">
					<!-- World Cup Filters as Buttons -->
					<div class="flex-grow flex flex-wrap items-center gap-4">

                        <button id="ganador-btn" class="filter-button">
                            üèÜ
                        </button>
                        <button id="finalista-btn" class="filter-button">
                            ü•à
                        </button>
                        <button id="mundiales-btn" class="filter-button">
                            ‚öΩ
                        </button>
					</div>
				</div>
                <!-- Random Country Button and Reset Button (Moved and restyled) -->
                <div class="flex items-center gap-2 ml-auto">
                    <!-- Random Country Button with Dice Icon -->
                    <button id="random-btn" class="text-3xl font-bold rounded-full w-12 h-12 flex items-center justify-center text-blue-500 hover:bg-blue-100 transition-colors duration-200">
                        üé≤
                    </button>
                    <!-- Reset Filters Button with X Icon -->
                    <button id="reset-btn" class="text-4xl font-bold rounded-full w-12 h-12 flex items-center justify-center text-red-500 hover:bg-red-100 transition-colors duration-200">
                        &times;
                    </button>					
                </div>
            </div>
            
            <!-- Flag Color Filters -->
            <div class="mt-4">
                <div id="colores-container" class="flex flex-wrap gap-2">
                <p class="font-bold text-gray-700 mb-2">Bandera: <!-- Color buttons will be generated here by JS-->
                </div></p>
            </div>

        </div>
        
        <!-- Search Results Section -->
        <div id="results-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Country cards will be rendered here -->
            <p id="no-results" class="col-span-full text-center text-gray-500 font-semibold text-lg hidden">No se encontraron pa√≠ses para √©sta b√∫squeda.</p>
        </div>

    </div>

    <!-- Modal to show country details -->
    <div id="modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 invisible opacity-0">
        <div class="bg-white p-6 md:p-8 rounded-3xl shadow-2xl max-w-lg w-full relative transform scale-95 transition-all duration-300 ease-out">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            <h2 id="modal-country-name" class="text-3xl font-bold mb-4 text-blue-800 flex items-center"></h2>
            <div id="modal-content" class="text-gray-700 space-y-2">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        // CSV data
        const csvData = `Pa√≠s,Continente,Regi√≥n,Idioma,Bandera (colores/s√≠mbolos),Mundiales (ganados/finales/participaciones)
Afganist√°n,Asia,Sur,"Dar√≠ (persa), Past√∫n","Negro, rojo, verde, escudo nacional",0/0/0
Albania,Europa,Sur,Alban√©s,"Rojo, negro, √°guila bic√©fala",0/0/0
Alemania,Europa,Central,Alem√°n,"Negro, rojo, dorado","4/8/20"
Andorra,Europa,Sur,Catal√°n,"Azul, amarillo, rojo, escudo de armas",0/0/0
Angola,√Åfrica,Sur,Portugu√©s,"Rojo, negro, estrella, amarillo, machete, rueda dentada",0/0/0
Antigua y Barbuda,Am√©rica,Central,Ingl√©s,"Negro, azul, blanco, rojo, sol dorado",0/0/0
Arabia Saudita,Asia,Oeste,Arabe,"Verde, Shahada, espada en blanco",0/0/6
Argelia,√Åfrica,Norte,Arabe,"Verde, blanco, media luna, estrella rojos",0/0/4
Argentina,Am√©rica,Sur,Espa√±ol,"Celeste, blanco, celeste, sol dorado","3/6/18"
Armenia,Asia,Oeste,Armenio,"Rojo, azul, naranja",0/0/0
Australia,Ocean√≠a,,Ingl√©s,"Azul, Union Jack, estrella Commonwealth, Cruz del Sur",0/0/6
Austria,Europa,Central,Alem√°n,"Rojo, blanco, rojo",0/0/7
Azerbaiy√°n,Europa,Oeste,Azer√≠,"Azul, rojo, verde, estrella, media luna en blanco",0/0/0
Bahamas,Am√©rica,Norte,Ingl√©s,"Azul acuamarina, amarillo, negro",0/0/0
Banglad√©s,Asia,Sur,Bengal√≠,"Verde, c√≠rculo rojo",0/0/0
Barbados,Am√©rica,Central,Ingl√©s,"Azul, amarillo, azul, tridente negro",0/0/0
Bar√©in,Asia,Oeste,Arabe,"Rojo, franja blanco dentada",0/0/0
B√©lgica,Europa,Oeste,"Neerland√©s, Franc√©s, Alem√°n","Negro, amarillo, rojo",0/0/14
Belice,Am√©rica,Central,Ingl√©s,"Azul, escudo de armas, bordes rojos",0/0/0
Ben√≠n,√Åfrica,Oeste,Franc√©s,"Verde, amarillo, rojo",0/0/0
Bielorrusia,Europa,Este,Bielorruso, ruso,"Rojo, verde, patr√≥n ornamental",0/0/0
Birmania (Myanmar),Asia,Sudeste,Birmano,"Amarillo, verde, rojo, estrella blanco",0/0/0
Bolivia,Am√©rica,Sur,Espa√±ol,"Rojo, amarillo, verde",0/0/3
Bonaire,Am√©rica,Central,"Neerland√©s,Papiamento","Azul, amarillo, blanco, negro, rojo, estrella, rosa de los vientos,tim√≥n",0/0/0
Bosnia Herzegovina,Europa,Sur,"Bosnio, Croata, Serbio","Azul, tri√°ngulo amarillo, estrellas blancos",0/0/3
Botsuana,√Åfrica,Sur,Ingl√©s, Setsuana,"Celeste, franja negra, blanco",0/0/0
Brasil,Am√©rica,Sur,Portugu√©s,"Verde, amarillo, azul, blanco","5/7/22"
Brun√©i,Asia,Sudeste,Malayo,"Amarillo, diagonales en blanco, negro, escudo de armas",0/0/0
Bulgaria,Europa,Sur,B√∫lgaro,"Blanco, verde, rojo",0/0/7
Burkina Faso,√Åfrica,Oeste,Franc√©s,"Rojo, verde, estrella amarillo",0/0/0
Burundi,√Åfrica,Central,Kirundi, Franc√©s,"Rojo, verde, blanco,estrellas rojos",0/0/0
But√°n,Asia,Sur,Dzongkha,"Amarillo, naranja, drag√≥n blanco",0/0/0
Cabo Verde,√Åfrica,Oeste,Portugu√©s,"Azul, blanco, rojo, c√≠rculo de estrellas",0/0/0
Camboya,Asia,Sudeste,Jemer,"Azul, rojo, azul, templo de Angkor Wat",0/0/0
Camer√∫n,√Åfrica,Central,Franc√©s,Ingl√©s,"Verde, rojo, amarillo, estrella dorada",0/0/8
Canad√°,Am√©rica,Norte,Ingl√©s, Franc√©s,"Rojo, blanco, hoja de arce rojo",0/0/8
Catar,Asia,Oeste,Arabe,"Granate, blanco, borde dentado",0/0/1
Chad,√Åfrica,Central,Franc√©s, Arabe,"Azul, amarillo, rojo",0/0/0
Chile,Am√©rica,Sur,Espa√±ol,"Rojo, blanco, azul, estrella blanco",0/0/9
China,Asia,Este,"Chino, Mandar√≠n, ","Rojo,cinco estrellas amarillos",0/0/1
Chipre,Europa,Sur,"Griego, Turco","Blanco, silueta de la isla, ramas de olivo",0/0/0
Colombia,Am√©rica,Sur,Espa√±ol,"Amarillo, azul, rojo",0/0/6
Comoras,√Åfrica,Sur,"Comorense, Franc√©s, Arabe","Amarillo, blanco, rojo, azul, media luna, estrellas",0/0/0
Corea del Norte,Asia,Este,Coreano,"Azul, rojo, blanco, estrella rojo",0/0/2
Corea del Sur,Asia,Este,Coreano,"Blanco, YinYang, trigramas negros",0/0/11
Costa de Marfil,√Åfrica,Oeste,Franc√©s,"Naranja, blanco, verde",0/0/4
Costa Rica,Am√©rica,Central,Espa√±ol,"Azul, blanco, rojo",0/0/6
Croacia,Europa,Sur,Croata,"Rojo, blanco, azul, escudo de armas",0/1/6
Cuba,Am√©rica,Central,Espa√±ol,"Rojo, blanco, azul, estrella blanco",0/0/0
Dinamarca,Europa,Norte,Dan√©s,"Rojo, cruz blanco",0/0/6
Dominica,Am√©rica,Central,Ingl√©s,"Verde, amarillo, negro, blanco, loro",0/0/0
Ecuador,Am√©rica,Sur,Espa√±ol,"Amarillo, azul, rojo, escudo de armas",0/0/4
Egipto,√Åfrica,Norte,Arabe,"Rojo, blanco, negro, √°guila de Saladino",0/0/3
El Salvador,Am√©rica,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/4
Emiratos Arabes Unidos,Asia,Oeste,Arabe,"Verde, blanco, negro, rojo",0/0/1
Eritrea,√Åfrica,Norte,"Tigri√±a, Arabe,Ingl√©s","Rojo, verde, azul,ramas de olivo",0/0/0
Escocia,Europa,Oeste,Ingl√©s,"Azul, cruz blanco",0/0/8
Eslovaquia,Europa,Central,Eslovaco,"Blanco, azul, rojo, escudo de armas",0/0/1
Eslovenia,Europa,Sur,Esloveno,"Blanco, azul, rojo, escudo de armas",0/0/2
Espa√±a,Europa,Sur,Espa√±ol,"Rojo, amarillo, rojo, escudo de armas","1/1/16"
Estados Unidos,Am√©rica,Norte,Ingl√©s,"Rojo, blanco, azul,estrellas",0/0/12
Estonia,Europa,Norte,Estonio,"Azul, negro, blanco",0/0/0
Etiop√≠a,√Åfrica,Norte,Amh√°rico,"Verde, amarillo, rojo, emblema nacional",0/0/0
Filipinas,Asia,Sudeste,Filipino,Ingl√©s,"Azul, rojo, blanco, sol, estrellas",0/0/0
Finlandia,Europa,Norte,Fin√©s, sueco,"Blanco, azul, cruz",0/0/0
Fiyi,Ocean√≠a,,Ingl√©s, fiyiano,"Azul, Union Jack, escudo de armas",0/0/0
Francia,Europa,Oeste,Franc√©s,"Azul, blanco, rojo","2/4/16"
Gab√≥n,√Åfrica,Central,Franc√©s,"Verde, amarillo, azul",0/0/0
Gales,Europa,Oeste,Ingl√©s, gal√©s,"rojo, blanco, verde, drag√≥n",0/0/2
Gambia,√Åfrica,Oeste,Ingl√©s,"Rojo, azul, verde, blancos",0/0/0
Georgia,Asia,Oeste,Georgiano,"Blanco,cinco cruces rojos",0/0/0
Gibraltar,Europa,Sur,Ingl√©s,"blanco, castillo rojo, llave de oro",0/0/0
Ghana,√Åfrica,Oeste,Ingl√©s,"Rojo, amarillo, verde, estrella negra",0/0/4
Granada,Am√©rica,Central,Ingl√©s,"Rojo, amarillo, verde, estrella, nuez moscada",0/0/0
Grecia,Europa,Sur,Griego,"Azul, blanco, cruz",0/0/4
Guatemala,Am√©rica,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/4
Guinea,√Åfrica,Oeste,Franc√©s,"Rojo, amarillo, verde",0/0/0
Guinea-Bissau,√Åfrica,Oeste,Portugu√©s,"Rojo, negro, amarillo, verde, estrella negra",0/0/0
Guinea Ecuatorial,√Åfrica,Central,"Espa√±ol, Franc√©s, Portugu√©s","Verde, blanco, rojo, escudo nacional",0/0/0
Guyana,Am√©rica,Sur,Ingl√©s,"Verde, amarillo, blanco, rojo, negro",0/0/0
Hait√≠,Am√©rica,Central,Haitiano, Franc√©s,"Azul, rojo, escudo de armas",0/0/0
Honduras,Am√©rica,Central,Espa√±ol,"Azul, blanco,cinco estrellas",0/0/3
Hong Kong,Asia,Este,"Canton√©s,Ingl√©s","rojo, blanco, flor de bauhinia",0/0/0
Hungr√≠a,Europa,Central,H√∫ngaro,"Rojo, blanco, verde",0/2/9
India,Asia,Sur,Hindi,Ingl√©s,"Naranja, blanco, verde, azul, Chakra",0/0/0
Indonesia,Asia,Sudeste,Indonesio,"Rojo, blanco",0/0/1
Inglaterra,Europa,Oeste,Ingl√©s,"blanco, cruz rojo",1/1/16
Irak,Asia,Oeste,Arabe, kurdo,"Rojo, blanco, negro, verde",0/0/8
Ir√°n,Asia,Oeste,Persa (Farsi),"Verde, blanco, rojo, emblema nacional",0/0/6
Irlanda,Europa,Oeste,Irland√©s,Ingl√©s,"Verde, blanco, naranja",0/0/3
Irlanda del Norte,Europa,Oeste,Ingl√©s,"blanco, cruz rojo, estrella, corona",0/0/3
Islandia,Europa,Norte,Island√©s,"Azul, cruz rojo, blanco",0/0/1
Islas Feroe,Europa,Norte,"Fero√©s,Dan√©s","blanco, cruz rojo, azul",0/0/0
Israel,Asia,Oeste,Hebreo, Arabe,"Blanco, azul, Estrella de David",0/0/1
Italia,Europa,Sur,Italiano,"Verde, blanco, rojo","4/6/18"
Jamaica,Am√©rica,Central,Ingl√©s,"Negro, verde, amarillo",0/0/0
Jap√≥n,Asia,Este,Japon√©s,"Blanco, c√≠rculo rojo",0/0/7
Jordania,Asia,Oeste,Arabe,"Negro, blanco, verde, tri√°ngulo rojo, estrella blanco",0/0/0
Kazajist√°n,Asia,Central,Kazajo, ruso,"Celeste, sol,√°guila,patr√≥n ornamental",0/0/0
Kenia,√Åfrica,Este,Suajili,Ingl√©s,"Negro, rojo, verde, escudo,lanzas",0/0/0
Kirguist√°n,Asia,Central,Kirgu√≠s, ruso,"Rojo, sol, yurta estilizada",0/0/0
Kiribati,Ocean√≠a,,Ingl√©s, kiribatiano,"Rojo, azul, blanco, sol, ",0/0/0
Kuwait,Asia,Oeste,Arabe,"Verde, blanco, rojo, negro",0/0/1
Laos,Asia,Sudeste,Laosiano,"Rojo, azul, c√≠rculo blanco",0/0/0
Lesoto,√Åfrica,Sur,Sesoto,Ingl√©s,"Azul, blanco, verde, sombrero tradicional",0/0/0
Letonia,Europa,Norte,Let√≥n,"Rojo, blanco",0/0/0
L√≠bano,Asia,Oeste,Arabe,"Rojo, blanco, rojo, cedro verde",0/0/0
Liberia,√Åfrica,Oeste,Ingl√©s,"Rojo, blanco, cuadrado azul, estrella blanco",0/0/0
Libia,√Åfrica,Norte,Arabe,"Rojo, negro, verde, media luna, estrella",0/0/0
Liechtenstein,Europa,Central,Alem√°n,"Azul, rojo, corona dorada",0/0/0
Lituania,Europa,Norte,Lituano,"Amarillo, verde, rojo",0/0/0
Luxemburgo,Europa,Oeste,"Luxemburgu√©s, Franc√©s, Alem√°n","Rojo, blanco, azul",0/0/1
Macao,Asia,Este,"Canton√©s,Portugu√©s","Verde, flor de loto blanco,puente, mar",0/0/0
Macedonia del Norte,Europa,Sur,Macedonio,"Rojo, sol amarillo",0/0/0
Madagascar,√Åfrica,Sur,Malagasy, Franc√©s,"Blanco, rojo, verde",0/0/0
Malasia,Asia,Sudeste,Malayo,"Rojo, blanco, azul, amarillo, media luna, estrella",0/0/0
Malaui,√Åfrica,Sur,Chichewa,Ingl√©s,"Negro, rojo, verde, sol",0/0/0
Maldivas,Asia,Sur,Divehi,"Rojo, rect√°ngulo verde, media luna blanco",0/0/0
Mal√≠,√Åfrica,Oeste,Franc√©s,"Verde, amarillo, rojo",0/0/0
Malta,Europa,Sur,Malt√©s,Ingl√©s,"Blanco, rojo",0/0/0
Marruecos,√Åfrica,Norte,Arabe, bereber,"Rojo, estrella verde",0/0/6
Mauricio,√Åfrica,Sur,Ingl√©s, Franc√©s,"Rojo, azul, amarillo, verde",0/0/0
Mauritania,√Åfrica,Oeste,Arabe,"Verde, amarillo, estrella, media luna",0/0/0
M√©xico,Am√©rica,Norte,Espa√±ol,"Verde, blanco, rojo, escudo nacional",0/0/18
Micronesia,Ocean√≠a,,Ingl√©s,"Azul,cuatro estrellas blancos",0/0/0
Moldavia,Europa,Este,Rumano,"Azul, amarillo, rojo, escudo de armas",0/0/0
M√≥naco,Europa,Sur,Franc√©s,"Rojo, blanco",0/0/0
Mongolia,Asia,Este,Mongol,"Rojo, azul, rojo, Soyombo",0/0/0
Montenegro,Europa,Sur,Montenegrino,"Rojo, borde dorado, escudo de armas",0/0/0
Mozambique,√Åfrica,Sur,Portugu√©s,"Verde, negro, amarillo, libro, azada,rifle",0/0/0
Namibia,√Åfrica,Sur,Ingl√©s,"Azul, rojo, verde, blancos,sol dorado",0/0/0
Nauru,Ocean√≠a,,Nauruano,Ingl√©s,"Azul, estrella amarillo",0/0/0
Nepal,Asia,Sur,Nepal√≠,"Rojo, azul, sol, luna",0/0/0
Nicaragua,Am√©rica,Central,Espa√±ol,"Azul, blanco, escudo de armas",0/0/0
N√≠ger,√Åfrica,Oeste,Franc√©s,"Naranja, blanco, verde, c√≠rculo naranja",0/0/0
Nigeria,√Åfrica,Oeste,Ingl√©s,"Verde, blanco, verde",0/0/6
Noruega,Europa,Norte,Noruego,"Rojo, cruz azul, blanco",0/0/3
Nueva Zelanda,Ocean√≠a,,Ingl√©s, maor√≠,"Azul, Union Jack, Cruz del Sur",0/0/6
Om√°n,Asia,Oeste,Arabe,"Blanco, rojo, verde, emblema nacional",0/0/0
Pa√≠ses Bajos,Europa,Oeste,Neerland√©s,"Rojo, blanco, azul",0/3/11
Pakist√°n,Asia,Sur,Urd√∫,Ingl√©s,"Verde, franja blanco, media luna, estrella",0/0/0
Palaos,Ocean√≠a,,Palaosiano,Ingl√©s,"Azul, c√≠rculo amarillo",0/0/0
Panam√°,Am√©rica,Central,Espa√±ol,"Blanco, azul, rojo,estrellas",0/0/1
Pap√∫a Nueva Guinea,Ocean√≠a,,"Tok pisin, Hiri motu, Ingl√©s","Rojo, negro, ave del para√≠so, Cruz del Sur",0/0/0
Paraguay,Am√©rica,Sur,Espa√±ol, guaran√≠,"Rojo, blanco, azul, escudo nacional",0/0/8
Per√∫,Am√©rica,Sur,Espa√±ol,"Rojo, blanco",0/0/5
Polonia,Europa,Central,Polaco,"Blanco, rojo",0/0/8
Portugal,Europa,Sur,Portugu√©s,"Rojo, verde, escudo de armas",0/0/8
Puerto Rico,Am√©rica,Central,Espa√±ol,Ingl√©s,"Rojo, blanco, azul, estrella blanco",0/0/0
Qatar,Asia,Oeste,Arabe,"Granate, blanco, borde dentado",0/0/1
Reino Unido,Europa,Oeste,Ingl√©s,"Azul, rojo, blanco","1/1/16"
Rep√∫blica Centroafricana,√Åfrica,Central,Franc√©s, sango,"Azul, blanco, verde, amarillo, estrella",0/0/0
Rep√∫blica Checa,Europa,Central,Checo,"Blanco, rojo, azul",0/2/9
Rep√∫blica Democr√°tica del Congo,√Åfrica,Central,Franc√©s,"Azul, rojo, amarillo, estrella",0/0/0
Rep√∫blica Dominicana,Am√©rica,Central,Espa√±ol,"Azul, rojo, blanco, escudo de armas",0/0/0
Rep√∫blica del Congo,√Åfrica,Central,Franc√©s,"Verde, amarillo, rojo",0/0/0
Rumania,Europa,Este,Rumano,"Azul, amarillo, rojo",0/0/7
Rusia,Europa,Oeste,Ruso,"Blanco, azul, rojo",0/0/11
Ruanda,√Åfrica,Central,"Kinyarwanda, Franc√©s,Ingl√©s","Azul, amarillo, verde, sol",0/0/0
Saba,Am√©rica,Central,"Neerland√©s,Ingl√©s","rojo, azul, blanco, verde, estrella de cinco puntas",0/0/0
Samoa,Ocean√≠a,,Samoano,Ingl√©s,"Rojo, azul, cruz blanco",0/0/0
San Crist√≥bal y Nieves,Am√©rica,Central,Ingl√©s,"Verde, rojo, negro, amarillos, estrellas",0/0/0
San Eustaquio,Am√©rica,Central,"Neerland√©s,Ingl√©s","Azul, amarillo, rojo, emblema",0/0/0
San Marino,Europa,Sur,Italiano,"Blanco, azul, escudo de armas",0/0/0
San Vicente y las Granadinas,Am√©rica,Central,Ingl√©s,"Azul, amarillo, verde,rombos verdes",0/0/0
Santa Luc√≠a,Am√©rica,Central,Ingl√©s,"Azul, negro, blanco, amarillo, tri√°ngulo",0/0/0
Santo Tom√© y Pr√≠ncipe,√Åfrica,Central,Portugu√©s,"Verde, amarillo, rojo, estrellas negras",0/0/0
Senegal,√Åfrica,Oeste,Franc√©s,"Verde, amarillo, rojo, estrella verde",0/0/3
Serbia,Europa,Sur,Serbio,"Rojo, azul, blanco, escudo de armas",0/0/12
Seychelles,√Åfrica,Sur,"Criollo, Ingl√©s, Franc√©s","Rojo, amarillo, azul, verde, blanco",0/0/0
Sierra Leona,√Åfrica,Oeste,Ingl√©s,"Verde, blanco, azul",0/0/0
Singapur,Asia,Sudeste,"Malayo, Ingl√©s, Chino, Tamil","Rojo, blanco, luna, estrellas",0/0/0
Siria,Asia,Oeste,Arabe,"Rojo, blanco, negro, estrellas verdes",0/0/0
Somalia,√Åfrica,Norte,Somal√≠, Arabe,"Celeste, estrella blanco",0/0/0
Sri Lanka,Asia,Sur,Cingal√©s, tamil,"Amarillo, verde, naranja, rojo, le√≥n",0/0/0
Sud√°frica,√Åfrica,Sur,"Ingl√©s, Zul√∫, Xhosa, Afrik√°ans, Sesoto sa laboa, Setsuana, Tsonga, Suazi, Venda, Sesoto, Lengua de se√±as sudafricana","Negro, amarillo, verde, blanco, rojo, azul",0/0/3
Sud√°n,√Åfrica,Norte,Arabe,Ingl√©s,"Rojo, blanco, negro, tri√°ngulo verde",0/0/0
Sud√°n del Sur,√Åfrica,Norte,Ingl√©s,"Rojo, blanco, negro, verde, estrella amarillo",0/0/0
Suecia,Europa,Norte,Sueco,"Azul, cruz amarillo",0/1/12
Suiza,Europa,Central,"Alem√°n, Franc√©s, Italiano, Romanche","Rojo, cruz blanco",0/0/12
Surinam,Am√©rica,Sur,Neerland√©s,"Verde, blanco, rojo, estrella amarillo",0/0/0
Suazilandia (Esuatini),√Åfrica,Sur,Suazi,Ingl√©s,"Azul, amarillo, rojo, escudo,nzas",0/0/0
Tailandia,Asia,Sudeste,Tailand√©s,"Rojo, blanco, azul, blanco, rojo",0/0/0
Taiw√°n (China Taipei/Rep√∫blica de China),Asia,Este,Mandar√≠n,"Rojo, sol blanco en un cuadrado azul",0/0/0
Tanzania,√Åfrica,Este,Suajili,Ingl√©s,"Verde, azul, negro, amarillo",0/0/0
Tayikist√°n,Asia,Central,Tayiko, ruso,"Rojo, blanco, verde, corona dorada",0/0/0
Timor Oriental,Asia,Sudeste,Portugu√©s, tetun,"Rojo, amarillo, negro, blanco, estrella",0/0/0
Togo,√Åfrica,Oeste,Franc√©s,"Verde, amarillo, rojo, estrella blanco",0/0/0
Tonga,Ocean√≠a,,Tongano,Ingl√©s,"Rojo, cruz blanco",0/0/0
Trinidad y Tobago,Am√©rica,Central,Ingl√©s,"Rojo, franja negra, blanco",0/0/1
T√∫nez,√Åfrica,Norte,Arabe,"Rojo, c√≠rculo blanco, media luna, estrella",0/0/6
Turkmenist√°n,Asia,Central,Turcomano, ruso,"Verde, ornamento, media luna, estrellas",0/0/0
Turqu√≠a,Asia,Oeste,Turco,"Rojo, media luna, estrella blancos",0/0/2
Tuvalu,Ocean√≠a,,Ingl√©s, tuvaluano,"Azul celeste, Union Jack, estrellas amarillos",0/0/0
Ucrania,Europa,Este,Ucraniano,"Azul, amarillo",0/0/1
Uganda,√Åfrica,Este,Ingl√©s, suajili,"Negro, amarillo, rojo, grulla",0/0/0
Uruguay,Am√©rica,Sur,Espa√±ol,"Azul, blanco, sol","2/3/14"
Uzbekist√°n,Asia,Central,Uzbeko,"Azul, blanco, verde, media luna, estrellas",0/0/0
Vanuatu,Ocean√≠a,,,"Bislama, Ingl√©s, Franc√©s","Rojo, verde, negro, colmillo, hoja",0/0/0
Venezuela,Am√©rica,Sur,Espa√±ol,"Amarillo, azul, rojo,estrellas",0/0/0
Vietnam,Asia,Sudeste,Vietnamita,"Rojo, estrella amarillo",0/0/0
Yemen,Asia,Oeste,Arabe,"Rojo, blanco, negro",0/0/0
Yibuti,√Åfrica,Norte,Arabe, Franc√©s,"Celeste, verde, blanco, estrella rojo",0/0/0
Zambia,√Åfrica,Sur,Ingl√©s,"Verde, rojo, negro, naranja, √°guila",0/0/0
Zimbabue,√Åfrica,Sur,"Chichewa, Chibarwe, Ingl√©s, Kalanga, Kois√°n, Nambya, Ndau, Ndebele del norte, Shangani, Shona, Sesoto, Tsonga, Setsuana, Venda, Xhosa, Lengua de signos zimbabuense,","Verde, amarillo, rojo, negro, ave, estrella",0/0/0`;

        const colorMap = {
            'negro': '#000000',
            'rojo': '#FF0000',
            'verde': '#008000',
            'azul': '#0000FF',
            'blanco': '#FFFFFF',
            'amarillo': '#FFFF00',
            'naranja': '#FFA500',
            'dorado': '#FFD700',
            'granate': '#800000',
            'celeste': '#87CEEB',
            'marr√≥n': '#A52A2A',
            'gris': '#808080',
            'rosa': '#FFC0CB',
            'violeta': '#EE82EE',
            'morado': '#800080',
            'plateado': '#C0C0C0'
        };

        // DOM elements
        const continenteSelect = document.getElementById('continente-select');
        const idiomaSelect = document.getElementById('idioma-select');
        const coloresContainer = document.getElementById('colores-container');
        const mundialesBtn = document.getElementById('mundiales-btn');
        const ganadorBtn = document.getElementById('ganador-btn');
        const finalistaBtn = document.getElementById('finalista-btn');
        const randomBtn = document.getElementById('random-btn');
        const resetBtn = document.getElementById('reset-btn');
        const searchInput = document.getElementById('search-input');
        const resultsContainer = document.getElementById('results-container');
        const noResultsMessage = document.getElementById('no-results');
        const modal = document.getElementById('modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalCountryName = document.getElementById('modal-country-name');
        const modalContent = document.getElementById('modal-content');

        let allCountries = [];
        let filteredCountries = [];

        // Function to extract colors from a string
        function extractColors(text) {
            const colors = Object.keys(colorMap);
            const foundColors = new Set();
            colors.forEach(color => {
                if (text.toLowerCase().includes(color)) {
                    foundColors.add(color);
                }
            });
            return Array.from(foundColors);
        }

        // Function to parse the CSV into an array of objects
        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(h => h.trim().replace(/^"|"$/g, ''));
            const data = lines.slice(1).map(line => {
                const values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(v => v.trim().replace(/^"|"$/g, ''));
                const country = {};
                headers.forEach((header, i) => {
                    country[header.replace(/\s\(.*\)/, '').replace(/\s+/g, '')] = values[i];
                });
                return country;
            });
            return data;
        }

        // Function to render filter options
        function renderFilterOptions() {
            const continentRegions = new Set();
            const continentsOnly = new Set();
            const languages = new Set();
            const colors = new Set();

            allCountries.forEach(country => {
                if (country.Continente) {
                    continentsOnly.add(country.Continente);
                    const continentRegion = country.Continente + (country.Regi√≥n ? ` - ${country.Regi√≥n}` : '');
                    continentRegions.add(continentRegion);
                }
                
                if (country.Idioma) {
                    country.Idioma.split(',').forEach(lang => {
                        const trimmedLang = lang.trim();
                        if (trimmedLang) languages.add(trimmedLang);
                    });
                }
                
                if (country.Bandera) {
                    extractColors(country.Bandera).forEach(color => colors.add(color));
                }
            });

            const sortedContinentOptions = [...continentsOnly].sort().flatMap(c => {
                const regionOptions = [...continentRegions].filter(cr => cr.startsWith(c)).sort();
                return [c, ...regionOptions];
            });
            const uniqueContinentOptions = new Set(sortedContinentOptions);


            const sortedLanguages = [...languages].sort();
            const sortedColors = [...colors].sort();

            uniqueContinentOptions.forEach(cr => {
                continenteSelect.innerHTML += `<option value="${cr}">${cr}</option>`;
            });
            sortedLanguages.forEach(l => {
                idiomaSelect.innerHTML += `<option value="${l}">${l}</option>`;
            });
            
            sortedColors.forEach(c => {
                const button = document.createElement('div');
                button.className = 'color-circle';
                button.title = c.charAt(0).toUpperCase() + c.slice(1);
                button.style.backgroundColor = colorMap[c];
                button.dataset.color = c;
                if (c === 'blanco' || c === 'amarillo' || c === 'dorado' || c === 'plateado' || c === 'celeste') {
                    button.style.border = '2px solid #ccc';
                }
                button.addEventListener('click', () => {
                    button.classList.toggle('active');
                    filterAndSearchCountries();
                });
                coloresContainer.appendChild(button);
            });
        }

        // Function to render country cards
        function renderCountries(countries) {
            resultsContainer.innerHTML = '';
            if (countries.length === 0) {
                noResultsMessage.classList.remove('hidden');
            } else {
                noResultsMessage.classList.add('hidden');
            }

            countries.forEach(country => {
                const mundialesData = country.Mundiales.split('/');
                const hasWorldCupParticipation = parseInt(mundialesData[2]) > 0;
                const wins = parseInt(mundialesData[0]);
                const finals = parseInt(mundialesData[1]);
                
                const card = document.createElement('div');
                card.className = 'card bg-white p-6 rounded-2xl shadow-md flex flex-col justify-between';
                card.innerHTML = `
                    <div>
                        <h3 class="text-xl font-bold mb-2 text-blue-700">${country.Pa√≠s}</h3>
                        <div class="flex flex-wrap gap-2 mb-2">
                            ${wins > 0 ? `<span class="bg-blue-400 text-blue-900 text-xs font-semibold px-2 py-1 rounded-full">üèÜ ${wins}</span>` : ''}
                            ${finals > 0 ? `<span class="bg-pink-400 text-pink-900 text-xs font-semibold px-2 py-1 rounded-full">ü•à ${finals}</span>` : ''}
                            ${hasWorldCupParticipation ? `<span class="bg-yellow-400 text-yellow-900 text-xs font-semibold px-2 py-1 rounded-full">‚öΩ</span>` : ''}
                        </div>
                        <p class="text-gray-600 mb-1"><span class="font-semibold">Continente:</span> ${country.Continente || 'N/A'}</p>
                        <p class="text-gray-600 mb-1"><span class="font-semibold">Idioma:</span> ${country.Idioma || 'N/A'}</p>
                        <p class="text-gray-600 mb-4"><span class="font-semibold">Bandera:</span> ${country.Bandera || 'N/A'}</p>
                    </div>
                `;
                card.addEventListener('click', () => {
                    showModal(country);
                });
                resultsContainer.appendChild(card);
            });
        }

        // Function to filter and search countries
        function filterAndSearchCountries() {
            const continentRegion = continenteSelect.value;
            const idioma = idiomaSelect.value;
            const searchTerm = searchInput.value.toLowerCase();

            const selectedColors = Array.from(coloresContainer.querySelectorAll('.color-circle.active')).map(btn => btn.dataset.color);

            const mundiales = mundialesBtn.classList.contains('active');
            const ganador = ganadorBtn.classList.contains('active');
            const finalista = finalistaBtn.classList.contains('active');

            filteredCountries = allCountries.filter(country => {
                const matchesSearch = country.Pa√≠s.toLowerCase().includes(searchTerm);
                const matchesContinente = !continentRegion || (country.Continente === continentRegion) || (country.Continente + (country.Regi√≥n ? ` - ${country.Regi√≥n}` : '')) === continentRegion;
                const matchesIdioma = !idioma || country.Idioma.split(',').map(l => l.trim()).includes(idioma);
                
                // New logic: all selected colors must be present
                const countryColors = extractColors(country.Bandera);
                const matchesAllColors = selectedColors.length === 0 || selectedColors.every(color => countryColors.includes(color));

                const mundialesData = country.Mundiales.split('/').map(n => parseInt(n));
                const matchesMundiales = !mundiales || mundialesData[2] > 0;
                const matchesGanador = !ganador || mundialesData[0] > 0;
                const matchesFinalista = !finalista || mundialesData[1] > 0;

                return matchesSearch && matchesContinente && matchesIdioma && matchesAllColors && matchesMundiales && matchesGanador && matchesFinalista;
            });
            renderCountries(filteredCountries);
        }

        // Function to show a random country
        function showRandomCountry() {
            filterAndSearchCountries(); 
            if (filteredCountries.length > 0) {
                const randomCountry = filteredCountries[Math.floor(Math.random() * filteredCountries.length)];
                resultsContainer.innerHTML = ''; 
                renderCountries([randomCountry]);
            } else {
                resultsContainer.innerHTML = `<p id="no-results" class="col-span-full text-center text-gray-500 font-semibold text-lg">No hay pa√≠ses en la lista para elegir. Por favor, ajusta los filtros.</p>`;
            }
        }

        // Function to show the modal with country details
        function showModal(country) {
            const mundialesData = country.Mundiales.split('/');
            modalCountryName.textContent = country.Pa√≠s;
            modalContent.innerHTML = `
                <p><span class="font-bold">Continente:</span> ${country.Continente || 'N/A'}</p>
                <p><span class="font-bold">Regi√≥n:</span> ${country.Regi√≥n || 'N/A'}</p>
                <p><span class="font-bold">Idiomas:</span> ${country.Idioma || 'N/A'}</p>
                <p><span class="font-bold">Bandera:</span> ${country.Bandera || 'N/A'}</p>
            `;
            modal.classList.add('modal-active');
        }

        // Function to hide the modal
        function hideModal() {
            modal.classList.remove('modal-active');
        }

        // Initialize the application
        window.onload = () => {
            allCountries = parseCSV(csvData);
            renderFilterOptions();
            filterAndSearchCountries();

            // Add event listeners for filters and actions
            continenteSelect.addEventListener('change', filterAndSearchCountries);
            idiomaSelect.addEventListener('change', filterAndSearchCountries);
            searchInput.addEventListener('input', filterAndSearchCountries);
            
            // Event listeners for the new filter buttons
            mundialesBtn.addEventListener('click', () => {
                mundialesBtn.classList.toggle('active');
                filterAndSearchCountries();
            });
            ganadorBtn.addEventListener('click', () => {
                ganadorBtn.classList.toggle('active');
                filterAndSearchCountries();
            });
            finalistaBtn.addEventListener('click', () => {
                finalistaBtn.classList.toggle('active');
                filterAndSearchCountries();
            });
            
            randomBtn.addEventListener('click', showRandomCountry);
            resetBtn.addEventListener('click', () => {
                continenteSelect.value = '';
                idiomaSelect.value = '';
                mundialesBtn.classList.remove('active');
                ganadorBtn.classList.remove('active');
                finalistaBtn.classList.remove('active');
                searchInput.value = '';
                coloresContainer.querySelectorAll('.color-circle').forEach(btn => btn.classList.remove('active'));
                filterAndSearchCountries();
            });
            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'modal') {
                    hideModal();
                }
            });
        };
    </script>
</body>
</html>
